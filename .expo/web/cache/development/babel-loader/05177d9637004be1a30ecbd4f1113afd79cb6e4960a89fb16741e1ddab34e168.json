{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\OneDrive\\\\latest\\\\SafeMitraLatest\\\\screen\\\\functional-part\\\\EmergencySOSScreen.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Ionicons } from '@expo/vector-icons';\nimport { useNavigation } from '@react-navigation/native';\nimport { Audio } from 'expo-av';\nimport * as FileSystem from 'expo-file-system';\nimport SafeMitraLogo from '../../components/SafeMitraLogo';\nimport styles from '../styles-part/EmergencySOSScreenStyles';\nimport emergencyService from '../../services/emergencyService';\nimport locationService from '../../services/locationService';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ASSEMBLY_API_KEY = 'YOUR_ASSEMBLY_AI_API_KEY_HERE';\nconst HOTWORDS = ['sos', 'help', 'bachaao'];\nconst EmergencySOSScreen = () => {\n  const navigation = useNavigation();\n  const [isAlertActive, setIsAlertActive] = useState(false);\n  const [sosDuration, setSosDuration] = useState(0);\n  const [recording, setRecording] = useState(null);\n  const [transcript, setTranscript] = useState('');\n  const recordingRef = useRef(null);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [locationData, setLocationData] = useState(null);\n  const [emergencyActions, setEmergencyActions] = useState({\n    locationSent: false,\n    policeCalled: false,\n    ngoCalled: false,\n    evidenceSaved: false,\n    locationTracking: false\n  });\n  async function startRecording() {\n    try {\n      setIsLoading(true);\n      const {\n        status\n      } = await Audio.requestPermissionsAsync();\n      if (status !== 'granted') {\n        Alert.alert('Permission Required', 'Please grant microphone permission for emergency recording');\n        return;\n      }\n      await Audio.setAudioModeAsync({\n        allowsRecordingIOS: true,\n        playsInSilentModeIOS: true\n      });\n      const {\n        recording\n      } = await Audio.Recording.createAsync(Audio.RecordingOptionsPresets.HIGH_QUALITY);\n      recordingRef.current = recording;\n      setRecording(recording);\n      console.log('Emergency recording started');\n    } catch (err) {\n      console.error('Failed to start emergency recording', err);\n      Alert.alert('Error', 'Failed to start emergency recording');\n    } finally {\n      setIsLoading(false);\n    }\n  }\n  async function stopRecording() {\n    try {\n      setIsLoading(true);\n      console.log('Stopping emergency recording...');\n      if (!recordingRef.current) return;\n      await recordingRef.current.stopAndUnloadAsync();\n      const uri = recordingRef.current.getURI();\n      console.log('Emergency recording stopped and stored at', uri);\n      const base64Audio = await FileSystem.readAsStringAsync(uri, {\n        encoding: FileSystem.EncodingType.Base64\n      });\n      const audioBuffer = Buffer.from(base64Audio, 'base64');\n      const uploadUrl = await uploadToAssembly(audioBuffer);\n      if (uploadUrl) {\n        const transcriptText = await transcribeWithAssembly(uploadUrl);\n        setTranscript(transcriptText);\n        console.log('Emergency transcript:', transcriptText);\n        await saveEvidenceToBlockchain(uri, transcriptText);\n      }\n    } catch (err) {\n      console.error('Error in stopRecording:', err);\n      Alert.alert('Error', 'Failed to process emergency recording');\n    } finally {\n      setIsLoading(false);\n      setRecording(null);\n    }\n  }\n  async function uploadToAssembly(audioBuffer) {\n    try {\n      const response = await fetch('https://api.assemblyai.com/v2/upload', {\n        method: 'POST',\n        headers: {\n          authorization: ASSEMBLY_API_KEY,\n          'Transfer-Encoding': 'chunked'\n        },\n        body: audioBuffer\n      });\n      const data = await response.json();\n      return data.upload_url;\n    } catch (error) {\n      console.error('Upload failed:', error);\n      Alert.alert('Error', 'Failed to upload emergency audio');\n      return null;\n    }\n  }\n  async function transcribeWithAssembly(audioUrl) {\n    try {\n      const response = await fetch('https://api.assemblyai.com/v2/transcript', {\n        method: 'POST',\n        headers: {\n          authorization: ASSEMBLY_API_KEY,\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          audio_url: audioUrl\n        })\n      });\n      const data = await response.json();\n      const transcriptId = data.id;\n      let completed = false;\n      let transcriptText = '';\n      while (!completed) {\n        await new Promise(res => setTimeout(res, 3000));\n        const pollingRes = await fetch(`https://api.assemblyai.com/v2/transcript/${transcriptId}`, {\n          headers: {\n            authorization: ASSEMBLY_API_KEY\n          }\n        });\n        const pollingData = await pollingRes.json();\n        if (pollingData.status === 'completed') {\n          completed = true;\n          transcriptText = pollingData.text;\n        } else if (pollingData.status === 'error') {\n          throw new Error(pollingData.error);\n        }\n      }\n      return transcriptText;\n    } catch (error) {\n      console.error('Transcription failed:', error);\n      Alert.alert('Error', 'Failed to transcribe emergency audio');\n      return '';\n    }\n  }\n  useEffect(() => {\n    const initiateEmergency = async () => {\n      try {\n        setIsLoading(true);\n        setIsAlertActive(true);\n        await locationService.requestPermissions();\n        await startRecording();\n        const response = await emergencyService.initiateSOS();\n        console.log('Emergency initiated:', response);\n        setEmergencyActions(prev => Object.assign({}, prev, {\n          locationTracking: true\n        }));\n      } catch (err) {\n        setError('Failed to initiate emergency protocol: ' + err.message);\n        console.error('Failed to initiate emergency:', err);\n        Alert.alert('Emergency Error', 'Failed to initiate emergency. ' + err.message);\n      } finally {\n        setIsLoading(false);\n      }\n    };\n    initiateEmergency();\n    return () => {\n      if (recording) {\n        stopRecording();\n      }\n      if (isAlertActive) {\n        emergencyService.stopEmergencyAlert().catch(err => {\n          console.error('Error stopping emergency on unmount:', err);\n        });\n      }\n    };\n  }, []);\n  useEffect(() => {\n    const locationUpdateCallback = data => {\n      setLocationData(data);\n      console.log('Location updated:', data);\n    };\n    locationService.onLocationUpdate(locationUpdateCallback);\n    locationService.getCurrentLocation().then(location => {\n      setLocationData(location);\n    }).catch(err => {\n      console.error('Error getting initial location:', err);\n    });\n    return () => {\n      locationService.onLocationUpdate(null);\n    };\n  }, []);\n  useEffect(() => {\n    if (!isAlertActive) return;\n    const timer = setInterval(() => {\n      setSosDuration(prev => prev + 1);\n    }, 1000);\n    return () => clearInterval(timer);\n  }, [isAlertActive]);\n  const formatTime = seconds => {\n    const mins = Math.floor(seconds / 60);\n    const secs = seconds % 60;\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\n  };\n  const sendLocationToGuardians = async () => {\n    if (emergencyActions.locationSent) {\n      Alert.alert('Already Sent', 'Location has already been sent to guardians');\n      return;\n    }\n    try {\n      setIsLoading(true);\n      await emergencyService.sendLocationToGuardians();\n      setEmergencyActions(prev => Object.assign({}, prev, {\n        locationSent: true\n      }));\n      Alert.alert('Success', 'Location sent to guardians successfully');\n    } catch (err) {\n      setError('Failed to send location to guardians: ' + err.message);\n      Alert.alert('Error', 'Failed to send location to guardians: ' + err.message);\n      console.error('Error sending location to guardians:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const callPoliceAndNGO = async () => {\n    if (emergencyActions.policeCalled && emergencyActions.ngoCalled) {\n      Alert.alert('Already Notified', 'Police and NGO have already been notified');\n      return;\n    }\n    try {\n      setIsLoading(true);\n      await emergencyService.callPoliceAndNGO();\n      setEmergencyActions(prev => Object.assign({}, prev, {\n        policeCalled: true,\n        ngoCalled: true\n      }));\n      Alert.alert('Success', 'Police and NGO have been notified');\n    } catch (err) {\n      setError('Failed to notify authorities: ' + err.message);\n      Alert.alert('Error', 'Failed to notify authorities: ' + err.message);\n      console.error('Error notifying authorities:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const saveEvidenceToBlockchain = async (audioUri, transcriptText) => {\n    if (emergencyActions.evidenceSaved) {\n      Alert.alert('Already Saved', 'Evidence has already been securely saved');\n      return;\n    }\n    try {\n      setIsLoading(true);\n      await emergencyService.saveEvidenceToBlockchain({\n        audioUri,\n        transcript: transcriptText,\n        timestamp: new Date().toISOString(),\n        location: locationData\n      });\n      setEmergencyActions(prev => Object.assign({}, prev, {\n        evidenceSaved: true\n      }));\n      Alert.alert('Success', 'Emergency evidence has been securely saved');\n    } catch (err) {\n      setError('Failed to save evidence: ' + err.message);\n      Alert.alert('Error', 'Failed to save evidence: ' + err.message);\n      console.error('Error saving evidence:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  const stopEmergencyAlert = async () => {\n    try {\n      setIsLoading(true);\n      if (recording) {\n        await stopRecording();\n      }\n      await emergencyService.stopEmergencyAlert();\n      setIsAlertActive(false);\n      setSosDuration(0);\n      Alert.alert('Alert Stopped', 'Emergency alert has been cancelled');\n    } catch (err) {\n      setError('Failed to stop emergency alert: ' + err.message);\n      Alert.alert('Error', 'Failed to stop emergency alert: ' + err.message);\n      console.error('Error stopping emergency alert:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  return _jsxDEV(SafeAreaView, {\n    style: styles.container,\n    children: [_jsxDEV(View, {\n      style: styles.header,\n      children: [_jsxDEV(TouchableOpacity, {\n        style: styles.backButton,\n        onPress: () => navigation.goBack(),\n        children: _jsxDEV(Ionicons, {\n          name: \"arrow-back\",\n          size: 24,\n          color: \"#FF3B30\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 359,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 9\n      }, this), _jsxDEV(View, {\n        style: styles.logoContainer,\n        children: [_jsxDEV(SafeMitraLogo, {\n          color: \"#FF3B30\",\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 11\n        }, this), _jsxDEV(Text, {\n          style: styles.logoText,\n          children: \"SafeMitra\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 363,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), _jsxDEV(ScrollView, {\n      contentContainerStyle: styles.scrollContent,\n      children: _jsxDEV(View, {\n        style: styles.content,\n        children: [isLoading && _jsxDEV(ActivityIndicator, {\n          size: \"large\",\n          color: \"#FF3B30\",\n          style: styles.loadingIndicator\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 25\n        }, this), error && _jsxDEV(Text, {\n          style: styles.errorText,\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 21\n        }, this), _jsxDEV(View, {\n          style: styles.titleSection,\n          children: [_jsxDEV(Text, {\n            style: styles.title,\n            children: \"Emergency SOS Activated!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 13\n          }, this), _jsxDEV(Text, {\n            style: styles.subtitle,\n            children: \"Your emergency SOS has been activated. Help is on the way.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.timerContainer,\n          children: [_jsxDEV(Ionicons, {\n            name: \"time\",\n            size: 24,\n            color: \"#FF3B30\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), _jsxDEV(Text, {\n            style: styles.timerText,\n            children: [\"SOS Active: \", formatTime(sosDuration)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.mapContainer,\n          children: _jsxDEV(View, {\n            style: styles.mapPlaceholder,\n            children: [_jsxDEV(Ionicons, {\n              name: \"map\",\n              size: 40,\n              color: \"#CCCCCC\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 393,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.mapPlaceholderText,\n              children: \"Live Location Map\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 394,\n              columnNumber: 15\n            }, this), locationData ? _jsxDEV(Text, {\n              style: styles.mapPlaceholderSubtext,\n              children: [\"Latitude: \", locationData.latitude.toFixed(6), \", Longitude: \", locationData.longitude.toFixed(6), locationData.accuracy && ` (±${locationData.accuracy.toFixed(1)}m)`]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 396,\n              columnNumber: 17\n            }, this) : _jsxDEV(Text, {\n              style: styles.mapPlaceholderSubtext,\n              children: \"Waiting for location data...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.actionButtons,\n          children: [_jsxDEV(TouchableOpacity, {\n            style: [styles.actionButton, emergencyActions.locationSent && styles.actionButtonCompleted],\n            onPress: sendLocationToGuardians,\n            disabled: isLoading || emergencyActions.locationSent,\n            children: [_jsxDEV(Ionicons, {\n              name: \"location\",\n              size: 24,\n              color: \"#FFFFFF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 419,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.actionButtonText,\n              children: emergencyActions.locationSent ? 'Location Sent ✓' : 'Send Live Location to Guardians'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 424,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 411,\n            columnNumber: 13\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: [styles.actionButton, styles.emergencyButton, emergencyActions.policeCalled && emergencyActions.ngoCalled && styles.actionButtonCompleted],\n            onPress: callPoliceAndNGO,\n            disabled: isLoading || emergencyActions.policeCalled && emergencyActions.ngoCalled,\n            children: [_jsxDEV(Ionicons, {\n              name: \"call\",\n              size: 24,\n              color: \"#FFFFFF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 438,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.actionButtonText,\n              children: emergencyActions.policeCalled && emergencyActions.ngoCalled ? 'Authorities Notified ✓' : 'Call Police & NGO'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 13\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: [styles.actionButton, styles.blockchainButton, emergencyActions.evidenceSaved && styles.actionButtonCompleted],\n            onPress: () => {},\n            disabled: isLoading || emergencyActions.evidenceSaved,\n            children: [_jsxDEV(Ionicons, {\n              name: \"lock-closed\",\n              size: 24,\n              color: \"#FFFFFF\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 460,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.actionButtonText,\n              children: emergencyActions.evidenceSaved ? 'Evidence Saved ✓' : 'Save Voice & Location to Blockchain'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 465,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 11\n        }, this), _jsxDEV(View, {\n          style: styles.guardianAlert,\n          children: [_jsxDEV(View, {\n            style: styles.alertHeader,\n            children: [_jsxDEV(Ionicons, {\n              name: \"notifications\",\n              size: 24,\n              color: \"#FF3B30\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 474,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.alertTitle,\n              children: \"Guardians have been notified\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 475,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 473,\n            columnNumber: 13\n          }, this), _jsxDEV(View, {\n            style: styles.alertStatus,\n            children: [_jsxDEV(Ionicons, {\n              name: \"notifications\",\n              size: 20,\n              color: isAlertActive ? '#4CAF50' : '#FF3B30'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 478,\n              columnNumber: 15\n            }, this), _jsxDEV(Text, {\n              style: styles.alertStatusText,\n              children: isAlertActive ? 'Alert Active' : 'Alert Stopped'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 477,\n            columnNumber: 13\n          }, this), _jsxDEV(TouchableOpacity, {\n            style: styles.stopAlertButton,\n            onPress: stopEmergencyAlert,\n            disabled: isLoading,\n            children: _jsxDEV(Text, {\n              style: styles.stopAlertButtonText,\n              children: \"Stop Alert\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 491,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 487,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 472,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 369,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 367,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 5\n  }, this);\n};\nexport default EmergencySOSScreen;","map":{"version":3,"names":["React","useState","useEffect","useRef","View","TouchableOpacity","SafeAreaView","Text","ScrollView","ActivityIndicator","Alert","Ionicons","useNavigation","Audio","FileSystem","SafeMitraLogo","styles","emergencyService","locationService","jsxDEV","_jsxDEV","ASSEMBLY_API_KEY","HOTWORDS","EmergencySOSScreen","navigation","isAlertActive","setIsAlertActive","sosDuration","setSosDuration","recording","setRecording","transcript","setTranscript","recordingRef","isLoading","setIsLoading","error","setError","locationData","setLocationData","emergencyActions","setEmergencyActions","locationSent","policeCalled","ngoCalled","evidenceSaved","locationTracking","startRecording","status","requestPermissionsAsync","alert","setAudioModeAsync","allowsRecordingIOS","playsInSilentModeIOS","Recording","createAsync","RecordingOptionsPresets","HIGH_QUALITY","current","console","log","err","stopRecording","stopAndUnloadAsync","uri","getURI","base64Audio","readAsStringAsync","encoding","EncodingType","Base64","audioBuffer","Buffer","from","uploadUrl","uploadToAssembly","transcriptText","transcribeWithAssembly","saveEvidenceToBlockchain","response","fetch","method","headers","authorization","body","data","json","upload_url","audioUrl","JSON","stringify","audio_url","transcriptId","id","completed","Promise","res","setTimeout","pollingRes","pollingData","text","Error","initiateEmergency","requestPermissions","initiateSOS","prev","Object","assign","message","stopEmergencyAlert","catch","locationUpdateCallback","onLocationUpdate","getCurrentLocation","then","location","timer","setInterval","clearInterval","formatTime","seconds","mins","Math","floor","secs","toString","padStart","sendLocationToGuardians","callPoliceAndNGO","audioUri","timestamp","Date","toISOString","style","container","children","header","backButton","onPress","goBack","name","size","color","fileName","_jsxFileName","lineNumber","columnNumber","logoContainer","logoText","contentContainerStyle","scrollContent","content","loadingIndicator","errorText","titleSection","title","subtitle","timerContainer","timerText","mapContainer","mapPlaceholder","mapPlaceholderText","mapPlaceholderSubtext","latitude","toFixed","longitude","accuracy","actionButtons","actionButton","actionButtonCompleted","disabled","actionButtonText","emergencyButton","blockchainButton","guardianAlert","alertHeader","alertTitle","alertStatus","alertStatusText","stopAlertButton","stopAlertButtonText"],"sources":["C:/Users/PC/OneDrive/latest/SafeMitraLatest/screen/functional-part/EmergencySOSScreen.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { \r\n  View, \r\n  TouchableOpacity, \r\n  SafeAreaView, \r\n  Text, \r\n  ScrollView,\r\n  ActivityIndicator,\r\n  Alert\r\n} from 'react-native';\r\nimport { Ionicons } from '@expo/vector-icons';\r\nimport { useNavigation } from '@react-navigation/native';\r\nimport { Audio } from 'expo-av';\r\nimport * as FileSystem from 'expo-file-system';\r\nimport SafeMitraLogo from '../../components/SafeMitraLogo';\r\nimport styles from '../styles-part/EmergencySOSScreenStyles';\r\n\r\n// Import services\r\nimport emergencyService from '../../services/emergencyService';\r\nimport locationService from '../../services/locationService';\r\n\r\nconst ASSEMBLY_API_KEY = 'YOUR_ASSEMBLY_AI_API_KEY_HERE';\r\nconst HOTWORDS = ['sos', 'help', 'bachaao'];\r\n\r\nconst EmergencySOSScreen = () => {\r\n  const navigation = useNavigation();\r\n  const [isAlertActive, setIsAlertActive] = useState(false);\r\n  const [sosDuration, setSosDuration] = useState(0);\r\n  const [recording, setRecording] = useState(null);\r\n  const [transcript, setTranscript] = useState('');\r\n  const recordingRef = useRef(null);\r\n  \r\n  // Loading state for API calls\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  \r\n  // Error state for API error handling\r\n  const [error, setError] = useState(null);\r\n  \r\n  // Location data state\r\n  const [locationData, setLocationData] = useState(null);\r\n  \r\n  // State for tracking emergency actions\r\n  const [emergencyActions, setEmergencyActions] = useState({\r\n    locationSent: false,\r\n    policeCalled: false,\r\n    ngoCalled: false,\r\n    evidenceSaved: false,\r\n    locationTracking: false\r\n  });\r\n\r\n  async function startRecording() {\r\n    try {\r\n      setIsLoading(true);\r\n      const { status } = await Audio.requestPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        Alert.alert('Permission Required', 'Please grant microphone permission for emergency recording');\r\n        return;\r\n      }\r\n\r\n      await Audio.setAudioModeAsync({\r\n        allowsRecordingIOS: true,\r\n        playsInSilentModeIOS: true,\r\n      });\r\n\r\n      const { recording } = await Audio.Recording.createAsync(\r\n        Audio.RecordingOptionsPresets.HIGH_QUALITY\r\n      );\r\n      recordingRef.current = recording;\r\n      setRecording(recording);\r\n      console.log('Emergency recording started');\r\n    } catch (err) {\r\n      console.error('Failed to start emergency recording', err);\r\n      Alert.alert('Error', 'Failed to start emergency recording');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  }\r\n\r\n  async function stopRecording() {\r\n    try {\r\n      setIsLoading(true);\r\n      console.log('Stopping emergency recording...');\r\n      if (!recordingRef.current) return;\r\n\r\n      await recordingRef.current.stopAndUnloadAsync();\r\n      const uri = recordingRef.current.getURI();\r\n      console.log('Emergency recording stopped and stored at', uri);\r\n\r\n      const base64Audio = await FileSystem.readAsStringAsync(uri, {\r\n        encoding: FileSystem.EncodingType.Base64,\r\n      });\r\n\r\n      const audioBuffer = Buffer.from(base64Audio, 'base64');\r\n      const uploadUrl = await uploadToAssembly(audioBuffer);\r\n\r\n      if (uploadUrl) {\r\n        const transcriptText = await transcribeWithAssembly(uploadUrl);\r\n        setTranscript(transcriptText);\r\n        console.log('Emergency transcript:', transcriptText);\r\n\r\n        // Save the recording as evidence\r\n        await saveEvidenceToBlockchain(uri, transcriptText);\r\n      }\r\n    } catch (err) {\r\n      console.error('Error in stopRecording:', err);\r\n      Alert.alert('Error', 'Failed to process emergency recording');\r\n    } finally {\r\n      setIsLoading(false);\r\n      setRecording(null);\r\n    }\r\n  }\r\n\r\n  async function uploadToAssembly(audioBuffer) {\r\n    try {\r\n      const response = await fetch('https://api.assemblyai.com/v2/upload', {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: ASSEMBLY_API_KEY,\r\n          'Transfer-Encoding': 'chunked',\r\n        },\r\n        body: audioBuffer,\r\n      });\r\n\r\n      const data = await response.json();\r\n      return data.upload_url;\r\n    } catch (error) {\r\n      console.error('Upload failed:', error);\r\n      Alert.alert('Error', 'Failed to upload emergency audio');\r\n      return null;\r\n    }\r\n  }\r\n\r\n  async function transcribeWithAssembly(audioUrl) {\r\n    try {\r\n      const response = await fetch('https://api.assemblyai.com/v2/transcript', {\r\n        method: 'POST',\r\n        headers: {\r\n          authorization: ASSEMBLY_API_KEY,\r\n          'Content-Type': 'application/json',\r\n        },\r\n        body: JSON.stringify({ audio_url: audioUrl }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      const transcriptId = data.id;\r\n\r\n      let completed = false;\r\n      let transcriptText = '';\r\n      while (!completed) {\r\n        await new Promise(res => setTimeout(res, 3000));\r\n        const pollingRes = await fetch(\r\n          `https://api.assemblyai.com/v2/transcript/${transcriptId}`,\r\n          {\r\n            headers: { authorization: ASSEMBLY_API_KEY },\r\n          }\r\n        );\r\n        const pollingData = await pollingRes.json();\r\n        if (pollingData.status === 'completed') {\r\n          completed = true;\r\n          transcriptText = pollingData.text;\r\n        } else if (pollingData.status === 'error') {\r\n          throw new Error(pollingData.error);\r\n        }\r\n      }\r\n\r\n      return transcriptText;\r\n    } catch (error) {\r\n      console.error('Transcription failed:', error);\r\n      Alert.alert('Error', 'Failed to transcribe emergency audio');\r\n      return '';\r\n    }\r\n  }\r\n\r\n  // Initiate emergency protocol when screen loads\r\n  useEffect(() => {\r\n    const initiateEmergency = async () => {\r\n      try {\r\n        setIsLoading(true);\r\n        setIsAlertActive(true);\r\n        \r\n        // Request location permissions first if not already granted\r\n        await locationService.requestPermissions();\r\n        \r\n        // Start emergency recording\r\n        await startRecording();\r\n        \r\n        // Initiate SOS with emergency location tracking\r\n        const response = await emergencyService.initiateSOS();\r\n        console.log('Emergency initiated:', response);\r\n        \r\n        // Set emergency actions status\r\n        setEmergencyActions(prev => ({\r\n          ...prev,\r\n          locationTracking: true\r\n        }));\r\n      } catch (err) {\r\n        setError('Failed to initiate emergency protocol: ' + err.message);\r\n        console.error('Failed to initiate emergency:', err);\r\n        Alert.alert('Emergency Error', 'Failed to initiate emergency. ' + err.message);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    \r\n    initiateEmergency();\r\n    \r\n    // Clean up when component unmounts\r\n    return () => {\r\n      if (recording) {\r\n        stopRecording();\r\n      }\r\n      // Only stop emergency if user navigates away without explicitly stopping\r\n      if (isAlertActive) {\r\n        emergencyService.stopEmergencyAlert().catch(err => {\r\n          console.error('Error stopping emergency on unmount:', err);\r\n        });\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Set up location update listener\r\n  useEffect(() => {\r\n    // Set up listener for location updates\r\n    const locationUpdateCallback = (data) => {\r\n      setLocationData(data);\r\n      console.log('Location updated:', data);\r\n    };\r\n    \r\n    locationService.onLocationUpdate(locationUpdateCallback);\r\n    \r\n    // Get initial location immediately\r\n    locationService.getCurrentLocation()\r\n      .then(location => {\r\n        setLocationData(location);\r\n      })\r\n      .catch(err => {\r\n        console.error('Error getting initial location:', err);\r\n      });\r\n    \r\n    return () => {\r\n      // Clean up by setting the callback to null\r\n      locationService.onLocationUpdate(null);\r\n    };\r\n  }, []);\r\n\r\n  // Timer for SOS duration\r\n  useEffect(() => {\r\n    // Only start the timer if alert is active\r\n    if (!isAlertActive) return;\r\n    \r\n    const timer = setInterval(() => {\r\n      setSosDuration(prev => prev + 1);\r\n    }, 1000);\r\n    \r\n    return () => clearInterval(timer);\r\n  }, [isAlertActive]);\r\n\r\n  const formatTime = (seconds) => {\r\n    const mins = Math.floor(seconds / 60);\r\n    const secs = seconds % 60;\r\n    return `${mins}:${secs.toString().padStart(2, '0')}`;\r\n  };\r\n\r\n  // Send location to guardians\r\n  const sendLocationToGuardians = async () => {\r\n    if (emergencyActions.locationSent) {\r\n      Alert.alert('Already Sent', 'Location has already been sent to guardians');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      await emergencyService.sendLocationToGuardians();\r\n      setEmergencyActions(prev => ({ ...prev, locationSent: true }));\r\n      Alert.alert('Success', 'Location sent to guardians successfully');\r\n    } catch (err) {\r\n      setError('Failed to send location to guardians: ' + err.message);\r\n      Alert.alert('Error', 'Failed to send location to guardians: ' + err.message);\r\n      console.error('Error sending location to guardians:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Call police and NGO\r\n  const callPoliceAndNGO = async () => {\r\n    if (emergencyActions.policeCalled && emergencyActions.ngoCalled) {\r\n      Alert.alert('Already Notified', 'Police and NGO have already been notified');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      await emergencyService.callPoliceAndNGO();\r\n      setEmergencyActions(prev => ({ ...prev, policeCalled: true, ngoCalled: true }));\r\n      Alert.alert('Success', 'Police and NGO have been notified');\r\n    } catch (err) {\r\n      setError('Failed to notify authorities: ' + err.message);\r\n      Alert.alert('Error', 'Failed to notify authorities: ' + err.message);\r\n      console.error('Error notifying authorities:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Save evidence to blockchain\r\n  const saveEvidenceToBlockchain = async (audioUri, transcriptText) => {\r\n    if (emergencyActions.evidenceSaved) {\r\n      Alert.alert('Already Saved', 'Evidence has already been securely saved');\r\n      return;\r\n    }\r\n    \r\n    try {\r\n      setIsLoading(true);\r\n      await emergencyService.saveEvidenceToBlockchain({\r\n        audioUri,\r\n        transcript: transcriptText,\r\n        timestamp: new Date().toISOString(),\r\n        location: locationData\r\n      });\r\n      setEmergencyActions(prev => ({ ...prev, evidenceSaved: true }));\r\n      Alert.alert('Success', 'Emergency evidence has been securely saved');\r\n    } catch (err) {\r\n      setError('Failed to save evidence: ' + err.message);\r\n      Alert.alert('Error', 'Failed to save evidence: ' + err.message);\r\n      console.error('Error saving evidence:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  // Stop emergency alert\r\n  const stopEmergencyAlert = async () => {\r\n    try {\r\n      setIsLoading(true);\r\n      if (recording) {\r\n        await stopRecording();\r\n      }\r\n      await emergencyService.stopEmergencyAlert();\r\n      setIsAlertActive(false);\r\n      setSosDuration(0);\r\n      Alert.alert('Alert Stopped', 'Emergency alert has been cancelled');\r\n    } catch (err) {\r\n      setError('Failed to stop emergency alert: ' + err.message);\r\n      Alert.alert('Error', 'Failed to stop emergency alert: ' + err.message);\r\n      console.error('Error stopping emergency alert:', err);\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView style={styles.container}>\r\n      {/* Header */}\r\n      <View style={styles.header}>\r\n        <TouchableOpacity \r\n          style={styles.backButton}\r\n          onPress={() => navigation.goBack()}>\r\n          <Ionicons name=\"arrow-back\" size={24} color=\"#FF3B30\" />\r\n        </TouchableOpacity>\r\n        <View style={styles.logoContainer}>\r\n          <SafeMitraLogo color=\"#FF3B30\" size={30} />\r\n          <Text style={styles.logoText}>SafeMitra</Text>\r\n        </View>\r\n      </View>\r\n\r\n      <ScrollView contentContainerStyle={styles.scrollContent}>\r\n        {/* Main Content */}\r\n        <View style={styles.content}>\r\n          {/* Loading Indicator */}\r\n          {isLoading && <ActivityIndicator size=\"large\" color=\"#FF3B30\" style={styles.loadingIndicator} />}\r\n\r\n          {/* Error Message */}\r\n          {error && <Text style={styles.errorText}>{error}</Text>}\r\n\r\n          {/* Title Section */}\r\n          <View style={styles.titleSection}>\r\n            <Text style={styles.title}>Emergency SOS Activated!</Text>\r\n            <Text style={styles.subtitle}>\r\n              Your emergency SOS has been activated. Help is on the way.\r\n            </Text>\r\n          </View>\r\n\r\n          {/* Timer Display */}\r\n          <View style={styles.timerContainer}>\r\n            <Ionicons name=\"time\" size={24} color=\"#FF3B30\" />\r\n            <Text style={styles.timerText}>SOS Active: {formatTime(sosDuration)}</Text>\r\n          </View>\r\n\r\n          {/* Map Placeholder */}\r\n          <View style={styles.mapContainer}>\r\n            <View style={styles.mapPlaceholder}>\r\n              <Ionicons name=\"map\" size={40} color=\"#CCCCCC\" />\r\n              <Text style={styles.mapPlaceholderText}>Live Location Map</Text>\r\n              {locationData ? (\r\n                <Text style={styles.mapPlaceholderSubtext}>\r\n                  Latitude: {locationData.latitude.toFixed(6)}, \r\n                  Longitude: {locationData.longitude.toFixed(6)}\r\n                  {locationData.accuracy && ` (±${locationData.accuracy.toFixed(1)}m)`}\r\n                </Text>\r\n              ) : (\r\n                <Text style={styles.mapPlaceholderSubtext}>\r\n                  Waiting for location data...\r\n                </Text>\r\n              )}\r\n            </View>\r\n          </View>\r\n\r\n          {/* Action Buttons */}\r\n          <View style={styles.actionButtons}>\r\n            <TouchableOpacity \r\n              style={[\r\n                styles.actionButton,\r\n                emergencyActions.locationSent && styles.actionButtonCompleted\r\n              ]}\r\n              onPress={sendLocationToGuardians}\r\n              disabled={isLoading || emergencyActions.locationSent}\r\n            >\r\n              <Ionicons \r\n                name=\"location\" \r\n                size={24} \r\n                color=\"#FFFFFF\" \r\n              />\r\n              <Text style={styles.actionButtonText}>\r\n                {emergencyActions.locationSent ? 'Location Sent ✓' : 'Send Live Location to Guardians'}\r\n              </Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity \r\n              style={[\r\n                styles.actionButton, \r\n                styles.emergencyButton,\r\n                (emergencyActions.policeCalled && emergencyActions.ngoCalled) && styles.actionButtonCompleted\r\n              ]}\r\n              onPress={callPoliceAndNGO}\r\n              disabled={isLoading || (emergencyActions.policeCalled && emergencyActions.ngoCalled)}\r\n            >\r\n              <Ionicons \r\n                name=\"call\" \r\n                size={24} \r\n                color=\"#FFFFFF\" \r\n              />\r\n              <Text style={styles.actionButtonText}>\r\n                {(emergencyActions.policeCalled && emergencyActions.ngoCalled) ? \r\n                  'Authorities Notified ✓' : 'Call Police & NGO'}\r\n              </Text>\r\n            </TouchableOpacity>\r\n\r\n            <TouchableOpacity \r\n              style={[\r\n                styles.actionButton, \r\n                styles.blockchainButton,\r\n                emergencyActions.evidenceSaved && styles.actionButtonCompleted\r\n              ]}\r\n              onPress={() => {\r\n                // Implement the logic to open the file picker for selecting the audio file\r\n              }}\r\n              disabled={isLoading || emergencyActions.evidenceSaved}\r\n            >\r\n              <Ionicons \r\n                name=\"lock-closed\" \r\n                size={24} \r\n                color=\"#FFFFFF\" \r\n              />\r\n              <Text style={styles.actionButtonText}>\r\n                {emergencyActions.evidenceSaved ? 'Evidence Saved ✓' : 'Save Voice & Location to Blockchain'}\r\n              </Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n\r\n          {/* Guardian Alert Section */}\r\n          <View style={styles.guardianAlert}>\r\n            <View style={styles.alertHeader}>\r\n              <Ionicons name=\"notifications\" size={24} color=\"#FF3B30\" />\r\n              <Text style={styles.alertTitle}>Guardians have been notified</Text>\r\n            </View>\r\n            <View style={styles.alertStatus}>\r\n              <Ionicons \r\n                name=\"notifications\" \r\n                size={20} \r\n                color={isAlertActive ? '#4CAF50' : '#FF3B30'} \r\n              />\r\n              <Text style={styles.alertStatusText}>\r\n                {isAlertActive ? 'Alert Active' : 'Alert Stopped'}\r\n              </Text>\r\n            </View>\r\n            <TouchableOpacity \r\n              style={styles.stopAlertButton}\r\n              onPress={stopEmergencyAlert}\r\n              disabled={isLoading}>\r\n              <Text style={styles.stopAlertButtonText}>Stop Alert</Text>\r\n            </TouchableOpacity>\r\n          </View>\r\n        </View>\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nexport default EmergencySOSScreen; "],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}